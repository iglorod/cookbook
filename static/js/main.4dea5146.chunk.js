(this.webpackJsonpcookbook=this.webpackJsonpcookbook||[]).push([[0],{167:function(e,t,a){e.exports={paginationContainer:"Pagination_paginationContainer__w8erJ"}},168:function(e,t,a){e.exports={input:"InputElement_input__1f2zF"}},169:function(e,t,a){e.exports={submitBtn:"SubmitButton_submitBtn__35DQg"}},170:function(e,t,a){e.exports={redirectLink:"SignIn_redirectLink__3oBa-"}},171:function(e,t,a){e.exports={redirectLink:"SignUp_redirectLink__3qJXU"}},172:function(e,t,a){e.exports={brandLink:"NavigationBrand_brandLink__1mtQg"}},174:function(e,t,a){e.exports={logoutBtn:"LogoutButton_logoutBtn__2uRIc"}},176:function(e,t,a){e.exports=a(307)},188:function(e,t){},190:function(e,t){},227:function(e,t){},228:function(e,t){},284:function(e,t,a){},303:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(39),c=a.n(i),l=a(42),o=a(156),u=a(11),s=a(8),m=a(91),d=a.n(m),p={id:null,email:null,token:null,expirationTime:null,errorMessage:null,authStart:!1,refreshTimerId:null,loading:!0},g=function(e){localStorage.setItem("id",e.id),localStorage.setItem("email",e.email),localStorage.setItem("token",e.token),localStorage.setItem("expirationTime",e.expirationTime)},f=function(){localStorage.clear()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return{errorMessage:null,authStart:!0};case"LOGIN":var a=d.a.decode(t.token.data),n={id:a.id,email:a.email,token:t.token.data,expirationTime:a.exp};return t.remember&&g(n),Object(s.a)({},n);case"LOAD_FINISH":return Object(s.a)({},e,{loading:!1});case"AUTH_ERROR":return void 0===t.err.response?{errorMessage:"Service is unavailable. Please, try later...",authStart:!1}:{errorMessage:t.err.response.data.message,authStart:!1};case"REFRESH_TOKEN":var r=d.a.decode(t.token.data),i={id:r.id,email:r.email,token:t.token.data,expirationTime:r.exp};return g(i),Object(s.a)({},i);case"SIGN_IN_LOCALY":var c={id:localStorage.getItem("id"),email:localStorage.getItem("email"),token:localStorage.getItem("token"),expirationTime:localStorage.getItem("expirationTime")};return Object(s.a)({},c,{loading:!1});case"RESET_TIMEOUT_ID":return Object(s.a)({},e,{refreshTimerId:t.id});case"LOGOUT":return f(),Object(s.a)({},p,{loading:!1});default:return e}},h=a(13),v={recipes:[],fetching:!1,totalRecipesCount:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_START":return Object(s.a)({},e,{fetching:!0});case"FETCH_RECIPES":return Object(s.a)({},e,{recipes:Object(h.a)(t.recipes),fetching:!1});case"GET_RECIPES_COUNT":return Object(s.a)({},e,{totalRecipesCount:t.count});default:return e}},O=(a(284),a(15)),T=(a(285),a(33)),C=a(9),y=a(312),j=a(313),k=a(166),I=a(158),_=a.n(I).a.create({baseURL:"https://tranquil-reef-23276.herokuapp.com/"}),R=function(e){return e.readOnly?r.a.createElement("div",{style:{padding:"10px 0",textAlign:"center"}},r.a.createElement("h3",null,e.name)):r.a.createElement("div",{className:"recipeChunk"},r.a.createElement("h4",null,"Recipe Name"),r.a.createElement("input",{className:"form-control",value:e.name,onChange:e.readOnly?null:e.onChange.bind(void 0,"name"),placeholder:"Type your recipe name",readOnly:e.readOnly}))},S=function(e){var t=r.a.createElement("div",{style:{textAlign:"justify"}},e.description);return e.readOnly||(t=r.a.createElement("textarea",{className:"form-control",value:e.description,onChange:e.onChange.bind(void 0,"description"),placeholder:"Write some about your recipe",readOnly:e.readOnly})),r.a.createElement("div",{className:"recipeChunk"},r.a.createElement("h4",null,"Description"),t)},x=a(309),N=a(160),A=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a.Prepend,null,r.a.createElement(x.a.Text,null,e.text)),r.a.createElement(N.a,{value:e.time,onChange:e.onChange,readOnly:e.readOnly}))},w=function(e){return r.a.createElement("div",{className:"recipeChunk"},r.a.createElement("h4",null,"Cooking time (min.)"),r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(A,{time:e.prepTime,text:"Prep:",readOnly:e.readOnly,onChange:e.readOnly?null:e.onChange.bind(void 0,"prepTime")}),r.a.createElement(A,{time:e.cookTime,text:"Cook:",readOnly:e.readOnly,onChange:e.readOnly?null:e.onChange.bind(void 0,"cookTime")}),r.a.createElement(A,{time:e.totalTime,text:"Total:",readOnly:e.readOnly,onChange:e.readOnly?null:e.onChange.bind(void 0,"totalTime")})))},L=a(321),M=a(28),B=a(30),U=function(e){return r.a.createElement("div",{className:e.actionClass,onClick:e.onClick},r.a.createElement(B.a,{icon:e.icon}),e.text)},D=function(e){return r.a.createElement(L.a.Item,null,r.a.createElement("div",{className:"manageItems"},r.a.createElement(U,{actionClass:"addItem",icon:M.c,text:" Add one",onClick:e.onAdd}),r.a.createElement(U,{actionClass:"removeItem",icon:M.b,text:" Remove one",onClick:e.onRemove})))},F=a(310),P=function(e){return r.a.createElement(L.a.Item,{className:"list-item"},r.a.createElement(F.a,{pill:!0,variant:"info"},e.number),r.a.createElement("input",{className:"form-control",value:e.name,onChange:e.onChange,placeholder:"Type ".concat(e.type.slice(0,-1)," here"),readOnly:e.readOnly}))},H=function(e){var t=e.type.split("").shift().toUpperCase()+e.type.slice(1),a=null;return e.readOnly||(a=r.a.createElement(D,{onAdd:e.onAdd.bind(void 0,e.type),onRemove:e.onRemove.bind(void 0,e.type)})),r.a.createElement("div",{className:"recipeChunk"},r.a.createElement("h4",null,t),r.a.createElement(L.a,null,a,e.items.map((function(t,a){return r.a.createElement(P,{key:a,name:t,number:e.points?a+1:null,type:e.type,readOnly:e.readOnly,onChange:e.readOnly?null:e.onChange.bind(void 0,a,e.type)})}))))},V=a(175),z=a(319),G=function(e){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g.test(e)},q=a(93),Z=a.n(q),J=function(e){var t=Object(V.a)({accept:"image/*",noDrag:!0,multiple:!1,onDrop:function(t){e.onChange(t[0])}}),a=t.getRootProps,n=t.getInputProps,i=null;return e.readOnly||(i=r.a.createElement(z.a.Body,{className:Z.a.cardBody},r.a.createElement("div",Object.assign({},a(),{className:Z.a.uploadBtn}),r.a.createElement("input",n()),r.a.createElement("span",null,"Upload image")))),r.a.createElement(z.a,null,i,r.a.createElement(z.a.Img,{variant:"bottom",src:G(e.file)?e.file:""!==e.file?URL.createObjectURL(e.file):null}))},W=function(e){var t=new Date(1e3*e.date).toLocaleString(),a=e.author.split("@")[0],n=null;return e.versions&&(n=r.a.createElement(O.b,{to:{pathname:"/recipe-versions",state:{recipeId:e.recipeId}}},"Recipe versions")),r.a.createElement("div",{className:"authorContainer"},"Author: ",r.a.createElement("p",{className:"author"},a)," | ",r.a.createElement("span",{className:"creationDate"},t),n)},K=a(311),Y=function(e){var t=null;return e.loading&&(t=r.a.createElement(K.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})),r.a.createElement("div",{className:"recipeButton",onClick:e.onClick},e.text," ",t)},Q=a(96),$=a.n(Q),X=function(){return r.a.createElement("div",{className:$.a.spinnerModal},r.a.createElement("div",{className:$.a.spinner},r.a.createElement(K.a,{animation:"border",variant:"info"})))},ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{sm:1,md:2}),r.a.createElement(k.a,{sm:10,md:8},e.children),r.a.createElement(k.a,{sm:1,md:2}))},te=(a(88),Object(u.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)({_id:null,name:"",creatorId:null,description:"",prepTime:"",cookTime:"",totalTime:"",next:null,prev:null,ingredients:[],instructions:[],image:"",date:null}),a=Object(C.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(!0),o=Object(C.a)(l,2),u=o[0],s=o[1];Object(n.useEffect)((function(){var t=e.location.state.recipeId;_.get("/recipe/"+t).then((function(e){c({_id:e.data._id,name:e.data.name,creatorId:e.data.creatorId,description:e.data.description,prepTime:e.data.prepTime,cookTime:e.data.cookTime,totalTime:e.data.totalTime,next:e.data.next,prev:e.data.prev,ingredients:Object(h.a)(e.data.ingredients),instructions:Object(h.a)(e.data.instructions),image:e.data.image,date:e.data.date}),s(!1)}))}),[]);if(u)return r.a.createElement(X,null);var m=null;return i.creatorId._id!==e.userId||i.next||(m=r.a.createElement(ee,null,r.a.createElement(Y,{text:"Share New Recipe Version",onClick:function(){e.history.push({pathname:"/edit",state:{recipeId:i._id}})}}))),r.a.createElement(y.a,{className:"recipeContainer",fluid:!0},r.a.createElement(j.a,null,r.a.createElement(k.a,{sm:2}),r.a.createElement(k.a,{sm:8},r.a.createElement(j.a,{className:"recipeArea"},r.a.createElement(ee,null,r.a.createElement(J,{file:i.image,readOnly:!0})),r.a.createElement(ee,null,r.a.createElement(R,{name:i.name,readOnly:!0}),r.a.createElement(W,{author:i.creatorId.email,date:i.date,recipeId:i._id,versions:i.next||i.prev})),r.a.createElement(ee,null,r.a.createElement(S,{description:i.description,readOnly:!0})),r.a.createElement(ee,null,r.a.createElement(w,{prepTime:i.prepTime,cookTime:i.cookTime,totalTime:i.totalTime,readOnly:!0})),r.a.createElement(ee,null,r.a.createElement(H,{type:"ingredients",items:i.ingredients,readOnly:!0})),r.a.createElement(ee,null,r.a.createElement(H,{type:"instructions",items:i.instructions,points:!0,readOnly:!0})),m)),r.a.createElement(k.a,{sm:2})))}))),ae=a(18),ne=function(e){return null!==e.errorMessage?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},e.errorMessage):null},re=Object(u.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)({_id:null,name:"",creatorId:null,description:"",prepTime:"",cookTime:"",totalTime:"",next:null,prev:null,ingredients:[],instructions:[],image:"",date:null}),a=Object(C.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(null),o=Object(C.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(!0),p=Object(C.a)(d,2),g=p[0],f=p[1],E=Object(n.useState)(!1),v=Object(C.a)(E,2),b=v[0],O=v[1];if(Object(n.useEffect)((function(){var t=e.location.state.recipeId;_.get("/recipe/"+t).then((function(e){c({_id:e.data._id,name:e.data.name,creatorId:e.data.creatorId,description:e.data.description,prepTime:e.data.prepTime,cookTime:e.data.cookTime,totalTime:e.data.totalTime,next:e.data.next,prev:e.data.prev,ingredients:Object(h.a)(e.data.ingredients),instructions:Object(h.a)(e.data.instructions),image:e.data.image,date:e.data.date}),f(!1)}))}),[]),!e.userId)return r.a.createElement(T.a,{to:"/sign-in"});if(g||e.userId!==i.creatorId._id)return r.a.createElement(X,null);var I=function(e,t){var a=t.target.value;c((function(t){return Object(s.a)({},t,Object(ae.a)({},e,a))}))},x=function(e){c((function(t){var a=Object(h.a)(t[e]);return a.push(""),Object(s.a)({},t,Object(ae.a)({},e,Object(h.a)(a)))}))},N=function(e){c((function(t){var a=Object(h.a)(t[e]);return a.pop(),Object(s.a)({},t,Object(ae.a)({},e,Object(h.a)(a)))}))},A=function(e,t,a){var n=a.target.value;c((function(a){var r=Object(h.a)(a[t]);return r[e]=n,Object(s.a)({},a,Object(ae.a)({},t,Object(h.a)(r)))}))},L=function(e){return e.filter((function(e){return e.trim().length>0}))};return r.a.createElement(y.a,{className:"recipeContainer",fluid:!0},r.a.createElement(j.a,null,r.a.createElement(k.a,{sm:2}),r.a.createElement(k.a,{sm:8},r.a.createElement(j.a,{className:"recipeArea"},r.a.createElement(ee,null,r.a.createElement("h2",{className:"recipeCRU"},"Edit Recipe")),r.a.createElement(ee,null,r.a.createElement(J,{file:i.image,onChange:function(e){c((function(t){return Object(s.a)({},t,{image:e})}))}})),r.a.createElement(ee,null,r.a.createElement(W,{author:i.creatorId.email,date:i.date,recipeId:i._id,versions:i.next||i.prev}),r.a.createElement(R,{name:i.name,onChange:I})),r.a.createElement(ee,null,r.a.createElement(S,{description:i.description,onChange:I})),r.a.createElement(ee,null,r.a.createElement(w,{prepTime:i.prepTime,cookTime:i.cookTime,totalTime:i.totalTime,onChange:I})),r.a.createElement(ee,null,r.a.createElement(H,{type:"ingredients",items:i.ingredients,onAdd:x,onRemove:N,onChange:A})),r.a.createElement(ee,null,r.a.createElement(H,{type:"instructions",items:i.instructions,points:!0,onAdd:x,onRemove:N,onChange:A})),r.a.createElement(ee,null,r.a.createElement(ne,{errorMessage:u})),r.a.createElement(ee,null,r.a.createElement(Y,{text:"Update Recipe",loading:b,onClick:function(){if(function(){var e=!0;for(var t in i){if("image"!==t&&"prev"!==t&&"next"!==t&&"creatorId"!==t)e="ingredients"===t||"instructions"===t?L(i[t]).length>0&&e:i[t].length>0&&e}return e}()){O(!0),m(null);var t=function(){var t=new FormData,a=Math.floor((new Date).getTime()/1e3);return t.append("prevRecipeId",i._id),t.append("date",a),t.append("name",i.name),t.append("creatorId",e.userId),t.append("description",i.description),t.append("prepTime",i.prepTime),t.append("cookTime",i.cookTime),t.append("totalTime",i.totalTime),t.append("ingredients",L(i.ingredients)),t.append("instructions",L(i.instructions)),G(i.image)?t.append("image",i.image):t.append("image",i.image,i.image.name),t}();_.patch("/recipe",t).then((function(t){e.history.push({pathname:"/view",state:{recipeId:t.data._id}})})).catch((function(e){O(!1),m("Something went wrong...")}))}else m("Please fill all fields")}})))),r.a.createElement(k.a,{sm:2})))})),ie=Object(u.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)({name:"",description:"",prepTime:"",cookTime:"",totalTime:"",ingredients:[],instructions:[],image:""}),a=Object(C.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(null),o=Object(C.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(!1),p=Object(C.a)(d,2),g=p[0],f=p[1];if(!e.userId)return r.a.createElement(T.a,{to:"/sign-in"});var E=function(e,t){var a=t.target.value;c((function(t){return Object(s.a)({},t,Object(ae.a)({},e,a))}))},v=function(e){c((function(t){var a=Object(h.a)(t[e]);return a.push(""),Object(s.a)({},t,Object(ae.a)({},e,Object(h.a)(a)))}))},b=function(e){c((function(t){var a=Object(h.a)(t[e]);return a.pop(),Object(s.a)({},t,Object(ae.a)({},e,Object(h.a)(a)))}))},O=function(e,t,a){var n=a.target.value;c((function(a){var r=Object(h.a)(a[t]);return r[e]=n,Object(s.a)({},a,Object(ae.a)({},t,Object(h.a)(r)))}))},I=function(e){return e.filter((function(e){return e.trim().length>0}))};return r.a.createElement(y.a,{className:"recipeContainer",fluid:!0},r.a.createElement(j.a,null,r.a.createElement(k.a,{sm:2}),r.a.createElement(k.a,{sm:8},r.a.createElement(j.a,{className:"recipeArea"},r.a.createElement(ee,null,r.a.createElement("h2",{className:"recipeCRU"},"Create Recipe")),r.a.createElement(ee,null,r.a.createElement(J,{file:i.image,onChange:function(e){c((function(t){return Object(s.a)({},t,{image:e})}))}})),r.a.createElement(ee,null,r.a.createElement(R,{name:i.name,onChange:E})),r.a.createElement(ee,null,r.a.createElement(S,{description:i.description,onChange:E})),r.a.createElement(ee,null,r.a.createElement(w,{prepTime:i.prepTime,cookTime:i.cookTime,totalTime:i.totalTime,onChange:E})),r.a.createElement(ee,null,r.a.createElement(H,{type:"ingredients",items:i.ingredients,onAdd:v,onRemove:b,onChange:O})),r.a.createElement(ee,null,r.a.createElement(H,{type:"instructions",items:i.instructions,points:!0,onAdd:v,onRemove:b,onChange:O})),r.a.createElement(ee,null,r.a.createElement(ne,{errorMessage:u})),r.a.createElement(ee,null,r.a.createElement(Y,{text:"Create Recipe",loading:g,onClick:function(){if(function(){var e=!0;for(var t in i)if("image"===t)e="object"===typeof i[t]&&e;else if("ingredients"===t||"instructions"===t){e=I(i[t]).length>0&&e}else e=i[t].length>0&&e;return e}()){f(!0),m(null);var t=function(){var t=new FormData,a=Math.floor((new Date).getTime()/1e3);return t.append("date",a),t.append("name",i.name),t.append("creatorId",e.userId),t.append("description",i.description),t.append("prepTime",i.prepTime),t.append("cookTime",i.cookTime),t.append("totalTime",i.totalTime),t.append("ingredients",I(i.ingredients)),t.append("instructions",I(i.instructions)),t.append("image",i.image,i.image.name),t}();_.post("/recipe",t).then((function(t){e.history.push({pathname:"/view",state:{recipeId:t.data._id}})})).catch((function(e){f(!1),m("Something went wrong...")}))}else m("Please fill all fields & upload image")}})))),r.a.createElement(k.a,{sm:2})))})),ce=function(e){return{type:"FETCH_RECIPES",recipes:e}},le=function(e){return{type:"GET_RECIPES_COUNT",count:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){_.post("/recipe/recipes-count",{userId:e}).then((function(e){t(le(e.data))}))}},ue=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(n){n({type:"FETCHING_START"}),_.post("/recipe/list?skip=".concat(e,"&limit=").concat(t),{userId:a}).then((function(e){n(ce(e.data))}))}},se=a(320),me=a(167),de=a.n(me),pe=function(e){for(var t=[],a=1;a<=Math.ceil(e.recipesCount/e.step);a++)t.push(r.a.createElement(se.a.Item,{key:a,active:a===e.activePage,onClick:e.onClick.bind(void 0,a)},a));return t.length<2?null:r.a.createElement(se.a,{size:"sm",className:de.a.paginationContainer},t)},ge=a(43),fe=a.n(ge),Ee=function(e){return r.a.createElement(z.a,{className:e.original?fe.a.orignalRecipe:null},r.a.createElement(O.b,{to:{pathname:"/view",state:{recipeId:e.recipe._id}}},r.a.createElement("div",{style:{maxHeight:"150px",overflow:"hidden"}},r.a.createElement(z.a.Img,{variant:"top",src:e.recipe.image}))),r.a.createElement(z.a.Body,null,r.a.createElement(O.b,{to:{pathname:"/view",state:{recipeId:e.recipe._id}},className:fe.a.recipeUrl},r.a.createElement(z.a.Title,{className:fe.a.recipeName},e.recipe.name)),r.a.createElement(z.a.Text,{className:fe.a.recipeDescription},e.recipe.description),r.a.createElement(z.a.Body,{className:fe.a.recipeAdditionalData},r.a.createElement("div",null,r.a.createElement(B.a,{icon:M.a})," ",e.recipe.totalTime),new Date(1e3*e.recipe.date).toLocaleString())))},he=a(314),ve=(a(303),function(e){var t=null;return e.pagination&&(t=r.a.createElement(pe,{recipesCount:e.recipesCount,activePage:e.activePage,step:e.step,onClick:e.paginationHandler})),r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(he.a,{style:{width:"100%"}},e.recipes.map((function(t){return r.a.createElement(k.a,{xs:12,md:4,key:t._id,className:"pb-3"},r.a.createElement(Ee,{recipe:t,original:e.original===t._id}))})))),t)}),be=Object(u.b)((function(e){return{userId:e.auth.id,recipes:e.rcp.recipes,recipesCount:e.rcp.totalRecipesCount,fetching:e.rcp.fetching}}),(function(e){return{getRecipesCount:function(){e(oe())},loadRecipes:function(t,a){e(ue(t,a))}}}))((function(e){var t=Object(n.useState)(1),a=Object(C.a)(t,2),i=a[0],c=a[1];Object(n.useEffect)((function(){e.getRecipesCount(),e.loadRecipes(6*(i-1),6)}),[i]);return e.fetching?r.a.createElement(X,null):r.a.createElement(y.a,null,r.a.createElement(ve,{recipes:e.recipes,recipesCount:e.recipesCount,pagination:!0,step:6,activePage:i,paginationHandler:function(e){c(e)}}))})),Oe=Object(u.b)((function(e){return{userId:e.auth.id,recipes:e.rcp.recipes,recipesCount:e.rcp.totalRecipesCount,fetching:e.rcp.fetching}}),(function(e){return{getRecipesCount:function(t){e(oe(t))},loadRecipes:function(t,a,n){e(ue(t,a,n))}}}))((function(e){var t=Object(n.useState)(1),a=Object(C.a)(t,2),i=a[0],c=a[1];Object(n.useEffect)((function(){e.getRecipesCount(e.userId),e.loadRecipes(6*(i-1),6,e.userId)}),[i]);return e.userId?e.fetching?r.a.createElement(X,null):r.a.createElement(y.a,null,r.a.createElement(ve,{recipes:e.recipes,recipesCount:e.recipesCount,pagination:!0,step:6,activePage:i,paginationHandler:function(e){c(e)}})):r.a.createElement(T.a,{to:"/sign-in"})})),Te=a(317),Ce=a(168),ye=a.n(Ce),je=function(e){return r.a.createElement(Te.a.Group,{className:ye.a.input},r.a.createElement(Te.a.Label,null,e.label),r.a.createElement(Te.a.Control,{type:e.type,placeholder:e.placeholder,onChange:e.onInput,value:e.value,isInvalid:e.error}),r.a.createElement(Te.a.Control.Feedback,{type:"invalid"},e.helperText))},ke=a(66),Ie=a.n(ke),_e=a(97),Re=a.n(_e),Se=function(e){return r.a.createElement("div",{className:Re.a.titleBlock},r.a.createElement("div",null,r.a.createElement("img",{src:Ie.a,alt:"Logo",height:"70"})),r.a.createElement("div",{className:Re.a.titleText},e.children))},xe=function(e){return r.a.createElement(Te.a.Group,null,r.a.createElement(Te.a.Check,{id:"custom-checkbox",type:"checkbox",label:"Remember me",onChange:e.onChange,custom:!0}))},Ne=a(315),Ae=a(169),we=a.n(Ae),Le=function(e){var t=null;return e.startAuth&&(t=r.a.createElement(K.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})),r.a.createElement(Ne.a,{variant:"info",type:"submit",className:we.a.submitBtn,onClick:e.onClick,disabled:e.disabled},e.text," ",t)},Me=function(e){return{type:"AUTH_ERROR",err:e}},Be=function(e,t){return{type:"LOGIN",token:e,remember:t}},Ue=function(){return function(e){_.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),e({type:"SIGN_IN_LOCALY"}),e(De())}},De=function(){return function(e,t){clearTimeout(t().auth.refreshTimerId);var a=1e3*(t().auth.expirationTime-Math.floor((new Date).getTime()/1e3))-3e4;a<0&&(a=15e3);var n=setTimeout((function(){var a={token:t().auth.token};try{e(Fe(a))}catch(n){console.log(n)}}),a);e(function(e){return{type:"RESET_TIMEOUT_ID",id:e}}(n))}},Fe=function(e){return function(t,a){_.post("/user/refresh-token",e).then((function(e){_.defaults.headers.common.Authorization="Bearer "+e.data,t(function(e){return{type:"REFRESH_TOKEN",token:e}}(e)),a().auth.id?t(De()):t(Ue())})).catch((function(e){t(Me(e)),t({type:"LOGOUT"})}))}},Pe=function(e,t,a){return e||0!==a.length?a:t},He=function(e,t,a){var n=!0,r="";if(t.isRequred&&n&&(n=e.length>0&&n,r=Pe(n,"Please, fill this field",r)),t.isEmail&&n){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&n,r=Pe(n,"Email is incorrect",r)}return t.minLength&&n&&(n=e.length>5&&n,r=Pe(n,"Min password length is 6 symbols",r)),t.maxLength&&n&&(n=e.length<t.maxLength&&n,r=Pe(n,"Max length is "+t.maxLength+" symbols",r)),t.shoudBeEqual&&n&&(r=Pe(n=e===a&&n,"Emails don't match",r)),[n,r]},Ve=a(170),ze=a.n(Ve),Ge=Object(u.b)((function(e){return{errorMessage:e.auth.errorMessage,email:e.auth.email,authStart:e.auth.authStart}}),(function(e){return{onSignIn:function(t,a){return e((n=t,r=a,function(e){e({type:"AUTH_START"}),_.post("/user/signin",n).then((function(t){_.defaults.headers.common.Authorization="Bearer "+t.data,e(Be(t,r)),e(De())})).catch((function(t){e(Me(t))}))}));var n,r}}}))((function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)({email:{config:{label:"Email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,isEmail:!0},isValid:!1,validationMessage:"",value:""},password:{config:{label:"Password",type:"password",placeholder:"Type password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),o=Object(C.a)(l,2),u=o[0],m=o[1];if(e.email)return r.a.createElement(T.a,{to:"/"});var d=function(e,t){var a=t.target.value,n=He(a,u[e].validationRules,u.email.value),r=Object(C.a)(n,2),i=r[0],c=r[1];m((function(t){return Object(s.a)({},t,Object(ae.a)({},e,Object(s.a)({},t[e],{value:a,isValid:i,validationMessage:c})))}))},p=[],g=!0;for(var f in u)p.push(r.a.createElement(je,{key:f,label:u[f].config.label,type:u[f].config.type,placeholder:u[f].config.placeholder,value:u[f].value,onInput:d.bind(void 0,f),error:!u[f].isValid&&u[f].value.length>0,helperText:u[f].validationMessage})),g=u[f].isValid&&g;return r.a.createElement(y.a,{fluid:!0},r.a.createElement(j.a,null,r.a.createElement(k.a,{sm:1,md:4}),r.a.createElement(k.a,{sm:10,md:4},r.a.createElement(Se,null,"Sign In"),r.a.createElement(Te.a,null,p,r.a.createElement(ne,{errorMessage:e.errorMessage}),r.a.createElement(xe,{onChange:function(){c((function(e){return!e}))}}),r.a.createElement(Le,{text:"Sign In",disabled:!g,startAuth:e.authStart,onClick:function(t){t.preventDefault();var a={email:u.email.value,password:u.password.value};e.onSignIn(a,i)}}),r.a.createElement(O.b,{to:"/sign-up",className:ze.a.redirectLink},"Don't have an account? Sign Up"))),r.a.createElement(k.a,{sm:1,md:4})))})),qe=a(171),Ze=a.n(qe),Je=Object(u.b)((function(e){return{errorMessage:e.auth.errorMessage,email:e.auth.email,authStart:e.auth.authStart}}),(function(e){return{onSignUp:function(t,a){return e((n=t,r=a,function(e){e({type:"AUTH_START"}),_.post("/user/signup",n).then((function(t){_.defaults.headers.common.Authorization="Bearer "+t.data,e(Be(t,r)),e(De())})).catch((function(t){e(Me(t))}))}));var n,r}}}))((function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(C.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(null),p=Object(C.a)(d,2),g=p[0],f=p[1],E=Object(n.useState)({email:{config:{label:"Email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,isEmail:!0},isValid:!1,validationMessage:"",value:""},emailConfirm:{config:{label:"Confirm email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,shoudBeEqual:!0},isValid:!1,validationMessage:"",value:""},password:{config:{label:"Password",type:"password",placeholder:"Type password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),h=Object(C.a)(E,2),v=h[0],b=h[1];if(Object(n.useEffect)((function(){if(clearTimeout(g),u){var e=setTimeout((function(){var e={email:v.email.value};_.post("/user/email-exists",e).then((function(e){e.data&&b((function(e){return Object(s.a)({},e,{email:Object(s.a)({},e.email,{isValid:!1,validationMessage:"Email already exist"})})}))})).catch((function(e){return console.log(e)}))}),800);f(e)}}),[v.email.value]),e.email)return r.a.createElement(T.a,{to:"/"});var I=function(e,t){var a=t.target.value,n=He(a,v[e].validationRules,v.email.value),r=Object(C.a)(n,2),i=r[0],c=r[1];R(e,i),b((function(t){return Object(s.a)({},t,Object(ae.a)({},e,Object(s.a)({},t[e],{value:a,isValid:i,validationMessage:c})))}))},R=function(e,t){"email"===e&&m(t)},S=[],x=!0;for(var N in v)S.push(r.a.createElement(je,{key:N,label:v[N].config.label,type:v[N].config.type,placeholder:v[N].config.placeholder,value:v[N].value,onInput:I.bind(void 0,N),error:!v[N].isValid&&v[N].value.length>0,helperText:v[N].validationMessage})),x=v[N].isValid&&x;return r.a.createElement(y.a,{fluid:!0},r.a.createElement(j.a,null,r.a.createElement(k.a,{sm:1,md:4}),r.a.createElement(k.a,{sm:10,md:4},r.a.createElement(Se,null,"Sign Up"),r.a.createElement(Te.a,null,S,r.a.createElement(ne,{errorMessage:e.errorMessage}),r.a.createElement(xe,{onChange:function(){c((function(e){return!e}))}}),r.a.createElement(Le,{text:"Sign Up",disabled:!x,startAuth:e.authStart,onClick:function(t){t.preventDefault();var a={email:v.email.value,password:v.password.value};e.onSignUp(a,i)}}),r.a.createElement(O.b,{to:"/sign-in",className:Ze.a.redirectLink},"Already have an account? Sign in"))),r.a.createElement(k.a,{sm:1,md:4})))})),We=a(316),Ke=a(172),Ye=a.n(Ke),Qe=function(){return r.a.createElement(We.a.Brand,null,r.a.createElement(O.b,{to:"/",className:Ye.a.brandLink},r.a.createElement("img",{alt:"Logo",src:Ie.a,height:"45",className:"d-inline-block align-top"})," ",r.a.createElement("div",null,"CookBook")))},$e=a(318),Xe=a(98),et=a.n(Xe),tt=function(e){return r.a.createElement(O.c,{to:e.to,className:et.a.navLink,activeClassName:et.a.navLinkActive},e.children)},at=a(174),nt=a.n(at),rt=function(e){return r.a.createElement("div",{className:nt.a.logoutBtn,onClick:e.onClick},e.children)},it=Object(u.b)((function(e){return{userEmail:e.auth.email}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))((function(e){return e.userEmail?r.a.createElement(rt,{onClick:e.logout},r.a.createElement(B.a,{icon:M.f})," Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{to:"/sign-up"},r.a.createElement(B.a,{icon:M.g})," Sign Up"),r.a.createElement(tt,{to:"/sign-in"},r.a.createElement(B.a,{icon:M.e})," Sign In"))})),ct=function(){return r.a.createElement(We.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement($e.a,{className:"mr-auto"},r.a.createElement(tt,{to:"/my-recipes"},"My recipes"),r.a.createElement(tt,{to:"/create"},r.a.createElement(B.a,{icon:M.d})," Create recipe")),r.a.createElement(it,null))},lt=(a(305),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{collapseOnSelect:!0,className:"shadow",expand:"lg",bg:"info",variant:"light",fixed:"top"},r.a.createElement(Qe,null),r.a.createElement(We.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(ct,null)),r.a.createElement("div",{className:"empty"}))}),ot=Object(u.b)((function(e){return{userId:e.auth.id,recipes:e.rcp.recipes,recipesCount:e.rcp.totalRecipesCount,fetching:e.rcp.fetching}}),(function(e){return{loadRecipeVersions:function(t){e(function(e){return function(t){t({type:"FETCHING_START"}),_.get("recipe/recipe-versions/".concat(e)).then((function(e){t(ce(e.data.reverse()))}))}}(t))}}}))((function(e){var t=e.location.state.recipeId;return Object(n.useEffect)((function(){e.loadRecipeVersions(t)}),[]),e.fetching?r.a.createElement(X,null):r.a.createElement(y.a,null,r.a.createElement(ve,{original:t,recipes:e.recipes,recipesCount:e.recipesCount}))})),ut=Object(u.b)((function(e){return{loading:e.auth.loading}}),(function(e){return{signInByLocalData:function(){e(Ue())},refreshTokenAndSignIn:function(t){e(Fe(t))},finishLoading:function(){e({type:"LOAD_FINISH"})}}}))((function(e){return Object(n.useEffect)((function(){!function(e,t,a){if(localStorage.getItem("token")){var n=localStorage.getItem("expirationTime")-30;if(+Math.floor((new Date).getTime()/1e3)>=n)e({token:localStorage.getItem("token")});else t()}else a()}(e.refreshTokenAndSignIn,e.signInByLocalData,e.finishLoading)}),[]),e.loading?r.a.createElement(X,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,null),r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/create",component:ie,exact:!0}),r.a.createElement(T.b,{path:"/view",component:te,exact:!0}),r.a.createElement(T.b,{path:"/edit",component:re,exact:!0}),r.a.createElement(T.b,{path:"/sign-in",component:Ge,exact:!0}),r.a.createElement(T.b,{path:"/sign-up",component:Je,exact:!0}),r.a.createElement(T.b,{path:"/my-recipes",component:Oe,exact:!0}),r.a.createElement(T.b,{path:"/recipe-versions",component:ot,exact:!0}),r.a.createElement(T.b,{path:"/",component:be})))}));a(306);var st=function(){return r.a.createElement(O.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(ut,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt=Object(l.c)({auth:E,rcp:b}),dt=Object(l.d)(mt,Object(l.a)(o.a));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:dt},r.a.createElement(st,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,a){e.exports={recipeUrl:"RecipeCard_recipeUrl__294RC",recipeName:"RecipeCard_recipeName__22ZdI",recipeDescription:"RecipeCard_recipeDescription__M8bZh",recipeAdditionalData:"RecipeCard_recipeAdditionalData__1K8rg",orignalRecipe:"RecipeCard_orignalRecipe__miagY"}},66:function(e,t,a){e.exports=a.p+"static/media/logo.07034b8a.png"},88:function(e,t,a){},93:function(e,t,a){e.exports={cardBody:"RecipeFile_cardBody__3Fhm9",uploadBtn:"RecipeFile_uploadBtn__2CZJm"}},96:function(e,t,a){e.exports={spinnerModal:"ModalSpinner_spinnerModal__3EyMD",spinner:"ModalSpinner_spinner__qxP8v"}},97:function(e,t,a){e.exports={titleBlock:"TitleElement_titleBlock__1taCF",titleText:"TitleElement_titleText__1Nt8i"}},98:function(e,t,a){e.exports={navLink:"NavigationLink_navLink__2p166",navLinkActive:"NavigationLink_navLinkActive__2z35W"}}},[[176,1,2]]]);
//# sourceMappingURL=main.4dea5146.chunk.js.map